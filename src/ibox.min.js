class ibox{constructor(t={}){if(!ibox.isset(jQuery))throw"jQuery is required to run iBox!";this.object_name="i"+ibox.randomString(4)+"i",$("body").append(`<div class="ibox frame ${this.object_name}" data-id="${this.object_name}" data-changed="false" style="display:none" data-open="false" onclick="ibox.closeEvent(event,'${this.object_name}')">\n            <div style="display:none;" class="ibox scrollHandler ${this.object_name}" data-id="${this.object_name}" data-toTop=""></div>\n            <span class="ibox close ${this.object_name}" data-id="${this.object_name}" onclick="ibox.closeIt('${this.object_name}')">&times;</span>\n            <div class="ibox loader ${this.object_name}" data-id="${this.object_name}">\n                <div class="ibox spinner"></div>\n            </div><div class="ibox content ${this.object_name}" data-id="${this.object_name}"></div>\n            <div style="clear:both; width:0;height:0;"></div>\n            <span class="ibox copyright ${this.object_name}">iBox by Ethan Ziermann | <a href="https://github.com/C2H6-383/iBox" target="blank">GitHub</a></span>\n        </div>`),ibox.isset(t.content)?(this.content_set(t.content),this.content_show()):(console.log("adofilnjsligfjspogjspodfg"),$("div.ibox.frame."+this.object_name).attr("data-changed","false")),ibox.isset(t.active)&&t.active&&this.open()}remove(){$("div.ibox.frame."+this.object_name).remove()}static async closeIt(t){$("div.ibox.frame."+t)[0].classList.add("hiding"),ibox.scrollHandler(t,!1),await ibox.sleep(500),$("div.ibox.frame."+t)[0].classList.remove("hiding"),$("div.ibox.frame."+t).hide(),document.querySelector("div.ibox.frame."+t).setAttribute("data-open","false")}getId(){return this.object_name}closeLink(){return"ibox.closeIt('"+this.object_name+"')"}async close(){$("div.ibox.frame."+this.getId())[0].classList.add("hiding"),ibox.scrollHandler(this.getId(),!1),await ibox.sleep(500),$("div.ibox.frame."+this.getId())[0].classList.remove("hiding"),$("div.ibox.frame."+this.object_name).hide(),document.querySelector("div.ibox.frame."+this.object_name).setAttribute("data-open","false")}static closeEvent(t,e){t.target===document.querySelector("div.ibox.frame."+e)&&"true"===$("div.ibox.frame."+e).attr("data-open")&&ibox.closeIt(e)}open(){ibox.scrollHandler(this.object_name,!0),$("div.ibox.frame."+this.object_name).show(),$("div.ibox.frame."+this.object_name).attr("data-open","true")}loader_show(){$("div.ibox.loader."+this.object_name).show()}loader_hide(){$("div.ibox.loader."+this.object_name).hide()}content_set(t){$("div.ibox.content."+this.object_name).html(t),$("div.ibox.frame."+this.object_name).attr("data-changed","true")}content_append(t){$("div.ibox.content."+this.object_name).append(t),$("div.ibox.frame."+this.object_name).attr("data-changed","true")}content_clear(){$("div.ibox.content."+this.object_name).html(""),$("div.ibox.frame."+this.object_name).attr("data-changed","true")}content_get(){return $("div.ibox.content."+this.object_name).html()}content_show(){"true"===$("div.ibox.frame."+this.object_name).attr("data-changed")&&($("div.ibox.frame."+this.object_name).attr("data-changed","false"),document.querySelector("div.ibox.frame."+this.object_name).scrollTop=0),$("div.ibox.content."+this.object_name).show(),$("div.ibox.loader."+this.object_name).hide()}content_hide(){$("div.ibox.content."+this.object_name).hide(),$("div.ibox.loader."+this.object_name).show()}async content_async_set(t){this.content_hide();const e=await fetch(t),i=await e.text();this.content_set(i),$("div.ibox.frame."+this.object_name).attr("data-changed","true"),this.content_show()}async content_async_append(t){this.content_hide();const e=await fetch(t),i=await e.text();this.content_append(i),$("div.ibox.frame."+this.object_name).attr("data-changed","true"),this.content_show()}static isset(t){return void 0!==t}static randomString(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=i.length,a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*o));return e}static async sleep(t){return new Promise(e=>setTimeout(e,t))}static scrollHandler(t,e){if("true"===$("div.ibox.frame."+t).attr("data-changed")&&($("div.ibox.frame."+t).attr("data-changed","false"),document.querySelector("div.ibox.frame."+t).scrollTop=0),e)$("div.ibox.scrollHandler."+t).data("toTop",$(window).scrollTop()),$("body").css("overflow-y","hidden"),$("html").css("overflow-y","hidden");else{for(var i=$("div.ibox.frame"),o=0;o<i.length;o++)if(i[o].dataset.id!==t&&"true"===i[o].dataset.open)return;$("body").css("overflow-y","initial"),$("html").css("overflow-y","initial"),$(window).scrollTop($("div.ibox.scrollHandler."+t).data("toTop"))}}}